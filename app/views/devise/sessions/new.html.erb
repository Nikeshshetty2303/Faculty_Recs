<%= stylesheet_link_tag 'auth' %>

<div class="whole">
  <% if flash[:notice] %>
    <div class="alert alert-info alert-dismissible fade show" role="alert">
      <%= flash[:notice] %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% end %>

  <div class="card mb-3 sizing" style="max-width: 66rem; height: 70%">
      <h2 class='fw-bold text-center mobile_title'>National Institute of Technology Karnataka</h2>
      <h3 class='text-body-secondary text-center mobile_title'>Faculty Recruitment Portal</h3>
    <div class="row g-0" style="height: 100%">
      <div class="col-md-5 background" id='card-img'>
        <h2 class='fw-bold'>National Institute of Technology Karnataka</h2>
        <h3 class=''>Faculty Recruitment Portal</h3>
      </div>
      <div class="col-md-7" id='card-form'>
        <div class="card-body centering">
          <div class="centering">
            <div id="logo_text">
              <div id='logo_div'><%= image_tag "NITK_Emblem.png" %></div>
              <p class="text-body-secondary">Log in and advance your faculty career!</p>
            </div>

          <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
            <div class="field mb-3"">
              <%= f.label :email, for:"email_input", class:"form-label" %><br />
              <%= f.email_field :email, autofocus: true, autocomplete: "email", class:"form-control", id:"email_input", placeholder:'Enter your email'   %>
              <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
            </div>

            <div class="field mb-3">
              <%= f.label :password, for:"password_input", class:"form-label" %><br />
              <%= f.password_field :password, autocomplete: "current-password", class:"form-control", id:"password_input", placeholder:'Enter your password'%>
              <%= link_to "Forgot your password?", new_password_path(resource_name), class:"text-end" %>
            </div>

            <div class="actions">
              <div class="d-grid">
                <%= f.submit "Log in", class:"btn btn-primary" %>
              </div>
            </div>
          <% end %>

          <div class="py-3 text-center text-body-secondary"><span>No Account? </span><%= link_to "Sign up", new_registration_path(resource_name) %></div>
        </div>
      </div>
    </div>
  </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
  const alert = document.querySelector('.alert');
  if (alert) {
    // Show the alert
    alert.style.display = 'block';

    // Automatically hide the alert after 5 seconds
    setTimeout(function() {
      alert.classList.remove('show');
      setTimeout(function() {
        alert.remove();
      }, 150);
    }, 10000);

    // Handle manual dismissal
    const closeButton = alert.querySelector('.btn-close');
    if (closeButton) {
      closeButton.addEventListener('click', function() {
        alert.classList.remove('show');
        setTimeout(function() {
          alert.remove();
        }, 150);
      });
    }
  }
});
</script>