<%= form_with(model: form, local: true) do |form| %>
  <div class="child1">
    <%= form.label :title, style: "display: block" %>
    <%= form.text_field :title %>
  </div>
<div class="child-second">
  <div class="child2">
    <%= form.label :question_type_id, "Type of Question", style: "display: block", id: "question_type_id_#{form.object.id}" %>
    <%= form.select :question_type_id, options_for_select(QuestionType.all.map { |type| [type.title, type.id] }), { prompt: "Select a Question Type" }, id: "question_type_select_#{form.object.id}" %>
  </div>

  <div id="option-fields_<%= form.object.id %>" style="display: none;">
    <div id="options-container_<%= form.object.id %>">
      <!-- Options will be appended here dynamically -->
    </div>
    <button type="button" id="add-option_<%= form.object.id %>">Add Option</button>
  </div>

  <%= button_to 'Move Up', move_up_question_path(form.object.id), method: :patch %>
  <%= form.hidden_field :form_id, value: form.object.form_id %>
  <%= form_for(form.object, url: move_up_question_path(form.object.id), method: :patch, remote: true) do |f| %>
      <%= f.hidden_field :move_up, value: true %>
      <%= f.submit "Move Up", class: "btn btn-secondary" %>
    <% end %>

    <%= form_for(form.object, url: move_down_question_path(form.object.id), method: :patch, remote: true) do |f| %>
      <%= f.hidden_field :move_down, value: true %>
      <%= f.submit "Move Down", class: "btn btn-secondary" %>
    <% end %>
  <div class="child3">
    <%= form.submit class:"btn btn-primary" %>
  </div>

  </div>



<script>
  document.addEventListener("DOMContentLoaded", function() {
   document.addEventListener("click", function(event) {
     if (event.target.classList.contains("add-option_<%= form.object.id %>")) {
       const questionId = <%= form.object.id %>;
       const optionsContainer = document.getElementById(`options-container_<%=form.object.id%>`);
       const optionCount = optionsContainer.children.length / 2 + 1;

       const optionLabel = document.createElement("label");
       optionLabel.innerText = `Option ${optionCount} : `;
       optionsContainer.appendChild(optionLabel);

       const input = document.createElement("input");
       input.type = "text";
       input.name = `question[options_attributes][${questionId}][${optionCount}][title]`;
       input.placeholder = "Enter option";
       optionsContainer.appendChild(input);

       optionsContainer.appendChild(document.createElement("br")); // Line break for the next option
     }
   });

   // Rest of your JavaScript code...
 });

</script>
<% end %>
